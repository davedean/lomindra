# iOS app setup (MVP scaffold)

This repo includes an iOS SwiftUI scaffold under `ios/VikunjaRemindersApp`,
plus an Xcode project generated by XcodeGen.

## Open the Xcode project
1. Open `ios/VikunjaRemindersApp.xcodeproj` in Xcode.
2. Select an iOS simulator and run.

## Regenerate the project (optional)
- Edit `ios/project.yml` as needed.
- Run `xcodegen` from `ios/`.

## Notes
- The scaffold currently supports login + list selection.
- The sync buttons run the shared sync engine and show a summary.
- The login UI normalizes the server URL to `/api/v1` and can create API tokens via `/user/token` if `/tokens` fails.
- Background sync scheduling relies on BGTaskScheduler; device testing is more reliable than Simulator.

## Background sync testing
- Use a real device to validate BGTaskScheduler scheduling; the Simulator can report `too many pending` with zero pending requests.
- For immediate validation, use the in-app "Run Background Sync Now" debug button.

## Troubleshooting login
If login fails in the app, use the CLI probe to verify credentials quickly:
```bash
VIKUNJA_API_BASE="https://your-host" \
VIKUNJA_USERNAME="user" \
VIKUNJA_PASSWORD="pass" \
swift scripts/login_probe.swift
```
Expected output: `Login succeeded. Token length: ...`
